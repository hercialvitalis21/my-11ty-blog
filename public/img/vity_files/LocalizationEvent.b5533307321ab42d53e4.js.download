!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],t);else{var r="object"==typeof exports?t(require("lodash")):t(e._);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,(e=>(()=>{var t={fv4j:(e,t)=>{t.DEFAULT_LOCALE="en-US"},AqpL:(e,t,r)=>{const{DEFAULT_LOCALE:n}=r("fv4j");t.A={locale:n,computedLocale:n,userId:0,country:"",countryCode:"",pageCtxId:"",isPro:!1,abTests:{},userAgent:"",knownCrawler:!1,csrfToken:"",browserLanguage:"",currency:"",pathParameters:{},queryParameters:{},userGuid:"",url:"",ip:"",referrer:"",organizationId:"",experience:{isBuyer:!1,isSeller:!1,isBusiness:!1,value:""},isMobile:!1,isTouch:!1,isIos:!1}},luq0:t=>{"use strict";t.exports=e}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o);var e=n("luq0"),t=n.n(e);const r="object"==typeof window&&window.window===window&&window||"object"==typeof n.g&&n.g.global===n.g&&n.g||"object"==typeof self&&self.self===self&&self,a=Symbol();const i=Symbol.for("globalEventBus"),s=r[i]=r[i]||new class{constructor(){this[a]=new Map}on(e,t){let r=this[a].get(e);r||(this[a].set(e,new Set),r=this[a].get(e)),r.add(t)}once(e,t){var r=this;const n=function(){r.off(e,n),t(...arguments)};this.on(e,n)}one(e,t){this.has(e)||this.on(e,t)}has(e){return this[a].has(e)}off(e,t){if(!this[a].has(e))return;if(void 0===t)return void this[a].delete(e);const r=this[a].get(e);r.delete(t),0===r.size&&this[a].delete(e)}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=this[a].get(e);o&&o.forEach((e=>{e(...r)}))}deferred(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Promise.resolve().then((()=>{this.emit(e,...r)}))}},c="OBS::LOGGER",l="debug",u="verbose",d="info",g="warn",f="error",y="critical",p=[l,u,d,g,f,y],b=p.reduce(((e,t)=>Object.assign(e,{[t]:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.deferred(c,{entity:e,enrichments:r,level:t})}})),{});Object.defineProperty(b,"force",{value:p.reduce(((e,t)=>Object.assign(e,{[t]:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.deferred(c,{entity:e,enrichments:r,level:t,force:true})}})),{})});const h=b;var m=n("AqpL");const v=()=>{const e=t().get(window,"initialData.FiverrContext");return e||(h.error({message:"Browser context does not exist, please ensure the run time owner sets one on the window scope before using this API"}),m.A)},w=e=>e.substr(0,2),k={"de-DE":"Deutsch","en-US":"English",es:"Español","fr-FR":"Français","it-IT":"Italiano","nl-NL":"Nederlands","pt-BR":"Português"},O={"en-US":"www","de-DE":"de",es:"es","fr-FR":"fr","pt-BR":"br","it-IT":"it","nl-NL":"nl"},j="en-US",E=(Object.keys(k),w(j)),S={};Object.keys(k).forEach((e=>{const t=e.toUpperCase().replace(/-/g,"_");S[t]=e}));const _=Object.values(O).join("|"),x=(new RegExp("^((".concat(_,")\\.){1,2}(dev\\.){0,1}fiverr.com$")),{ab:"аҧсуа",aa:"Afaraf",af:"Afrikaans",ak:"Akan",sq:"Shqip",am:"አማርኛ",ar:"العربية",an:"Aragonés",hy:"Հայերեն",as:"অসমীয়া",av:"магӀарул мацӀ",ae:"avesta",ay:"aymar aru",az:"azərbaycan dili",bm:"bamanankan",ba:"башҡорт теле",eu:"euskara",be:"Беларуская",bn:"বাংলা",bh:"भोजपुरी",bi:"Bislama",bs:"bosanski jezik",br:"brezhoneg",bg:"български език",my:"ဗမာစာ",ca:"Català",ch:"Chamoru",ce:"нохчийн мотт",ny:"chiCheŵa",zh:"中文 (简体)",cv:"чӑваш чӗлхи",kw:"Kernewek",co:"corsu",cr:"ᓀᐦᐃᔭᐍᐏᐣ",hr:"hrvatski",cs:"čeština",da:"dansk",nl:"Nederlands",en:"English",eo:"Esperanto",et:"eesti keel",ee:"Eʋegbe",fo:"føroyskt",fj:"vosa Vakaviti",fi:"suomen kieli",fr:"Français",ff:"Fulfulde",gl:"Galego",ka:"ქართული",de:"Deutsch",el:"Ελληνικά",gn:"Avañeẽ",gu:"ગુજરાતી",ht:"Kreyòl ayisyen",ha:"Hausa",he:"עברית",hz:"Otjiherero",hi:"हिंदी",ho:"Hiri Motu",hu:"Magyar",ia:"Interlingua",id:"Bahasa Indonesia",ga:"Gaeilge",ig:"Asụsụ Igbo",ik:"Iñupiatun",io:"Ido",is:"Íslenska",it:"Italiano",iu:"ᐃᓄᒃᑎᑐᑦ",ja:"日本語 (にほんご／にっぽんご)",jv:"basa Jawa",jw:"basa Jawa",kl:"kalaallisut",kn:"ಕನ್ನಡ",kr:"Kanuri",ks:"कश्मीरी",kk:"Қазақ тілі",km:"ភាសាខ្មែរ",ki:"Gĩkũyũ",rw:"Ikinyarwanda",ky:"кыргыз тили",kv:"коми кыв",kg:"KiKongo",ko:"한국어",ku:"Kurdî",kj:"Kuanyama",la:"latine",lb:"Lëtzebuergesch",lg:"Luganda",li:"Limburgs",ln:"Lingála",lo:"ພາສາລາວ",lt:"lietuvių kalba",lu:"Kiluba",lv:"latviešu valoda",gv:"Gaelg",mk:"македонски јазик",mg:"Malagasy fiteny",ms:"bahasa Melayu",ml:"മലയാളം",mt:"Malti",mi:"te reo Māori",mr:"मराठी",mh:"Kajin M̧ajeļ",mn:"монгол",na:"Ekakairũ Naoero",nv:"Diné bizaad",nb:"Norsk bokmål",nd:"isiNdebele",ne:"नेपाली",ng:"Owambo",nn:"Norsk nynorsk",no:"Norsk",ii:"ꆈꌠ꒿ Nuosuhxop",nr:"isiNdebele",oc:"Occitan",oj:"ᐊᓂᔑᓈᐯᒧᐎᓐ",om:"Afaan Oromoo",or:"ଓଡ଼ିଆ",os:"ирон æвзаг",pa:"ਪੰਜਾਬੀ",pi:"पाऴि",fa:"فارسی",pl:"Polski",ps:"پښتو",pt:"Português",qu:"Runa Simi",rm:"rumantsch grischun",rn:"kiRundi",ro:"Română",ru:"русский язык",sa:"संस्कृतम्",sc:"sardu",sd:"सिन्धी",se:"Davvisámegiella",sm:"gagana faa Samoa",sg:"yângâ tî sängö",sr:"српски језик",gd:"Gàidhlig",sn:"chiShona",si:"සිංහල",sk:"slovenčina",sl:"slovenščina",so:"Soomaaliga",st:"Sesotho",es:"Español",su:"Basa Sunda",sw:"Kiswahili",ss:"SiSwati",sv:"svenska",ta:"தமிழ்",te:"తెలుగు",tg:"тоҷикӣ",th:"ไทย",ti:"ትግርኛ",bo:"བོད་ཡིག",tk:"Türkmen",tl:"Wikang Tagalog",tn:"Setswana",to:"faka Tonga",tr:"Türkçe",ts:"Xitsonga",tt:"татарча",tw:"Twi",ty:"Reo Tahiti",ug:"Uyƣurqə",uk:"українська",ur:"اردو",uz:"zbek",ve:"Tshivenḓa",vi:"Tiếng Việt",vo:"Volapük",wa:"Walon",cy:"Cymraeg",wo:"Wollof",fy:"Frysk",xh:"isiXhosa",yi:"ייִדיש",yo:"Yorùbá",za:"Saɯ cueŋƅ"}),L=(Object.keys(x),e=>!!x[e]),I={FR:"fr",ES:"es",MX:"es",IT:"it",DE:"de",NL:"nl",BR:"pt",PT:"pt"},R=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return s.deferred(e,{events:r})},T={send:R("OBS::BIG_QUERY")},A=["translated-ltr","translated-rtl"],P=()=>{const{locale:e,browserLanguage:t,countryCode:r,currency:n,computedLocale:o}=v(),a=(e=>{let{locale:t,browserLanguage:r,countryCode:n}=e,o=E;const a=t&&w(t);if(a!==o&&L(a))o=a;else{const e=r&&w(r);e!==o&&L(e)?o=e:I[n]&&(o=I[n])}return o})({countryCode:r,locale:e,browserLanguage:t});T.send({type:"localization_attributes_per_page",group:"technical_events",domain:{name:"Localization"},localization:{experience_locale:e,visitor_assumed_language:a,display_currency:n,formatting_locale:o}})},C=()=>{if(!window||!window.MutationObserver)return;const e=new MutationObserver((t=>{t.forEach((t=>{let{target:r}=t;if("HTML"!==r.nodeName)return;const n=r;(e=>A.some((t=>e.classList.contains(t))))(n)&&(e.disconnect(),T.send({type:"page_translated_by_extension",group:"user_action",domain:{name:"Localization"},localization:{experience_locale:v().locale,translation_source:"Google Translate",language_after_translation:n.lang}}))}))})),t=window.document.querySelector("html");e.observe(t,{attributes:!0,attributeFilter:["class"]})},D=()=>{P(),C()},z=["count","time","gauge","set","histogram"],B=z.reduce(((e,t)=>Object.assign(e,{[t]:function(e,r,n){let{rate:o,tags:a,enforceRate:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object.entries({prefix:e,metric:r}).forEach(((e,t)=>{let[r,n]=e;if("string"!=typeof n||!n)throw new TypeError("Expected argument ".concat(t," (").concat(r,") to be a string. Instead got ").concat(typeof n," (").concat(n,")"))}));const c=[e,r].join(".");return s.deferred("OBS::STATS",{type:t,key:c,value:n,rate:o,tags:a,enforceRate:i})}})),{});Object.defineProperty(B,"prefix",{value:e=>z.reduce(((t,r)=>Object.assign(t,{[r]:B[r].bind(B,e)})),{})});const N=B;function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const q=e=>{return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:e.type,name:e.name,created_at:new Date(e.createdAt).toISOString(),duration:e.duration||null,value:e.value||null},{context_id:(t=e.context).id,user_id:t.userId.toString(),country_code:t.countryCode,browser:t.browserName,locale:t.locale,currency:t.currency,platform:t.platform});var t},K=R("OBS::BIG_QUERY_MONICORE"),U="monicore",G="mobile_web",H="web";class V extends Error{constructor(e){super(e),this.name="ContextNotFoundError"}}const W=Date.now(),X=window.performance&&window.performance.now?window.performance:{now:()=>Date.now()-W,timeOrigin:W},Y=()=>{const{pageCtxId:e,userId:t,countryCode:r,locale:n,isMobile:o,currency:a}=v();return{id:e||"",userId:t||"",countryCode:r||"",locale:n||"",currency:a||"",platform:o?G:H}},J="event",Q="error",$=[J,Q],Z="ADD_EVENT_ERROR",ee="ADD_ERROR_ERROR",te=()=>X.now()+(()=>{let e=X.timeOrigin;return"number"!=typeof e&&(e=X.timing&&X.timing.navigationStart),e})(),re=t=>!(!(0,e.isUndefined)(t)&&!(0,e.isString)(t))||(h.error("Expected value to be a string. Instead got a ".concat(typeof t),{caughtBy:U,value:t}),!1),ne=t=>!(!(0,e.isString)(t)||(0,e.isEmpty)(t))||(h.error("Expected name to be a string. Instead got a ".concat(typeof t),{caughtBy:U,name:t}),!1),oe=()=>{N.count("monicore","context_not_found")},ae=e=>(e=>{e.context.isKnownCrawler||K(q(e))})(e),ie=(e,t)=>{try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J;if(ne(e))if($.includes(r)){re(t)||(t=void 0);try{const n={name:e,value:t,type:r,createdAt:te(),context:Y()};ae(n)}catch(e){e instanceof V?oe():h.warn(e,{caughtBy:U,code:Z})}}else h.error('Expected "type" to be event or error. Instead got a '.concat(r),{caughtBy:U,code:Z})}(e,t,Q)}catch(e){h.warn(e,{caughtBy:U,code:ee})}};try{D(window.initialData.LocalizationEvent)}catch(e){((e,t,r)=>{const n="Layout component: ".concat(t,", failed on entry: ").concat(r,"."),o="layout.CSR.".concat(t,".").concat(r),a="layout.CSR_LOAD_CHUNK.".concat(t,".").concat(r),i=v();e instanceof Error&&"ChunkLoadError"===(null==e?void 0:e.name)?ie(a):(h.error(e,{context:i,description:n,componentName:t,entryName:r,package:"@fiverr-private/layout-sdk"}),ie(o))})(e,"LocalizationEvent","LocalizationEvent")}})(),o})()));
//# sourceMappingURL=LocalizationEvent.b5533307321ab42d53e4.js.map